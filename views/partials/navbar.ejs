<nav class="navbar">
    <div class="nav-container">
        <div class="nav-brand">
            <a href="/" class="brand-link">
                <span>üéì</span>
                <span>UConnect</span>
            </a>
        </div>

        <% if (user) { %>
            <!-- Authenticated Navigation -->
            <div class="nav-menu">
                <div class="nav-links">
                    <a href="/posts" class="nav-link <%= currentPath === '/posts' ? 'active' : '' %>">
                        <span>üè†</span>
                        <span>Feed</span>
                    </a>
                    <a href="/posts/create" class="nav-link <%= currentPath === '/posts/create' ? 'active' : '' %>">
                        <span>‚ûï</span>
                        <span>Create</span>
                    </a>
                    <a href="/chat/requests" class="nav-link <%= currentPath === '/chat/requests' ? 'active' : '' %>">
                        <span>üîê</span>
                        <span>Secret Chat</span>
                    </a>
                    <a href="/users/campus" class="nav-link <%= currentPath === '/users/campus' ? 'active' : '' %>">
                        <span>üë•</span>
                        <span>Campus</span>
                    </a>
                    <% if (user.role === 'admin') { %>
                        <a href="/admin" class="nav-link <%= currentPath.startsWith('/admin') ? 'active' : '' %>">
                            <span>üõ°Ô∏è</span>
                            <span>Admin</span>
                        </a>
                    <% } %>
                </div>

                <!-- Theme Toggle -->
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                    <span>‚òÄÔ∏è</span>
                </button>

                <!-- User Menu -->
                <div class="user-menu">
                    <div class="user-dropdown">
                        <button class="user-btn" onclick="toggleUserMenu()">
                            <img src="<%= user.avatarUrl %>"
                                 alt="@<%= user.username %>" class="user-avatar">
                            <span class="user-name">@<%= user.username %></span>
                            <span>‚ñº</span>
                        </button>
                        <div class="dropdown-menu" id="userDropdown">
                            <a href="/users/profile" class="dropdown-item">
                                <span>üë§</span>
                                My Profile
                            </a>
                            <a href="/users/settings/profile" class="dropdown-item">
                                <span>‚öôÔ∏è</span>
                                Settings
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="/auth/logout" class="dropdown-item">
                                <span>üö™</span>
                                Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <span>‚ò∞</span>
            </button>
        <% } else { %>
            <!-- Guest Navigation -->
            <div class="nav-menu">
                <div class="nav-links">
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                        <span>‚òÄÔ∏è</span>
                    </button>
                    <a href="/auth/login" class="nav-link">Login</a>
                    <a href="/auth/register" class="btn btn-primary">Join Now</a>
                </div>
            </div>
        <% } %>
    </div>

    <!-- Mobile Menu -->
    <% if (user) { %>
        <div class="mobile-menu" id="mobileMenu">
            <a href="/posts" class="mobile-menu-item">
                <span>üè†</span>
                Feed
            </a>
            <a href="/posts/create" class="mobile-menu-item">
                <span>‚ûï</span>
                Create Post
            </a>
            <a href="/chat/requests" class="mobile-menu-item">
                <span>üîê</span>
                Secret Chat
            </a>
            <a href="/users/campus" class="mobile-menu-item">
                <span>üë•</span>
                Campus Users
            </a>
            <a href="/users/profile" class="mobile-menu-item">
                <span>üë§</span>
                My Profile
            </a>
            <a href="/users/settings/profile" class="mobile-menu-item">
                <span>‚öôÔ∏è</span>
                Settings
            </a>
            <div class="mobile-menu-item theme-toggle-mobile" onclick="toggleTheme()">
                <span>‚òÄÔ∏è</span>
                Toggle Theme
            </div>
            <% if (user.role === 'admin') { %>
                <a href="/admin" class="mobile-menu-item">
                    <span>üõ°Ô∏è</span>
                    Admin Panel
                </a>
            <% } %>
            <div class="mobile-menu-divider"></div>
            <a href="/auth/logout" class="mobile-menu-item">
                <span>üö™</span>
                Logout
            </a>
        </div>
    <% } %>
</nav>